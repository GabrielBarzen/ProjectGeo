const internal = new URL("sveltekit-internal://");
function resolve(base, path) {
  if (path[0] === "/" && path[1] === "/")
    return path;
  let url = new URL(base, internal);
  url = new URL(path, url);
  return url.protocol === internal.protocol ? url.pathname + url.search + url.hash : url.href;
}
function normalize_path(path, trailing_slash) {
  if (path === "/" || trailing_slash === "ignore")
    return path;
  if (trailing_slash === "never") {
    return path.endsWith("/") ? path.slice(0, -1) : path;
  } else if (trailing_slash === "always" && !path.endsWith("/")) {
    return path + "/";
  }
  return path;
}
function decode_pathname(pathname) {
  return pathname.split("%25").map(decodeURI).join("%25");
}
function decode_params(params) {
  for (const key in params) {
    params[key] = decodeURIComponent(params[key]);
  }
  return params;
}
const tracked_url_properties = (
  /** @type {const} */
  [
    "href",
    "pathname",
    "search",
    "toString",
    "toJSON"
  ]
);
function make_trackable(url, callback, search_params_callback) {
  const tracked = new URL(url);
  Object.defineProperty(tracked, "searchParams", {
    value: new Proxy(tracked.searchParams, {
      get(obj, key) {
        if (key === "get" || key === "getAll" || key === "has") {
          return (param) => {
            search_params_callback(param);
            return obj[key](param);
          };
        }
        callback();
        const value = Reflect.get(obj, key);
        return typeof value === "function" ? value.bind(obj) : value;
      }
    }),
    enumerable: true,
    configurable: true
  });
  for (const property of tracked_url_properties) {
    Object.defineProperty(tracked, property, {
      get() {
        callback();
        return url[property];
      },
      enumerable: true,
      configurable: true
    });
  }
  {
    tracked[Symbol.for("nodejs.util.inspect.custom")] = (depth, opts, inspect) => {
      return inspect(url, opts);
    };
  }
  {
    disable_hash(tracked);
  }
  return tracked;
}
function disable_hash(url) {
  allow_nodejs_console_log(url);
  Object.defineProperty(url, "hash", {
    get() {
      throw new Error(
        "Cannot access event.url.hash. Consider using `$page.url.hash` inside a component instead"
      );
    }
  });
}
function disable_search(url) {
  allow_nodejs_console_log(url);
  for (const property of ["search", "searchParams"]) {
    Object.defineProperty(url, property, {
      get() {
        throw new Error(`Cannot access url.${property} on a page with prerendering enabled`);
      }
    });
  }
}
function allow_nodejs_console_log(url) {
  {
    url[Symbol.for("nodejs.util.inspect.custom")] = (depth, opts, inspect) => {
      return inspect(new URL(url), opts);
    };
  }
}
const DATA_SUFFIX = "/__data.json";
const HTML_DATA_SUFFIX = ".html__data.json";
function has_data_suffix(pathname) {
  return pathname.endsWith(DATA_SUFFIX) || pathname.endsWith(HTML_DATA_SUFFIX);
}
function add_data_suffix(pathname) {
  if (pathname.endsWith(".html"))
    return pathname.replace(/\.html$/, HTML_DATA_SUFFIX);
  return pathname.replace(/\/$/, "") + DATA_SUFFIX;
}
function strip_data_suffix(pathname) {
  if (pathname.endsWith(HTML_DATA_SUFFIX)) {
    return pathname.slice(0, -HTML_DATA_SUFFIX.length) + ".html";
  }
  return pathname.slice(0, -DATA_SUFFIX.length);
}
function validator(expected) {
  function validate(module, file) {
    if (!module)
      return;
    for (const key in module) {
      if (key[0] === "_" || expected.has(key))
        continue;
      const values = [...expected.values()];
      const hint = hint_for_supported_files(key, file?.slice(file.lastIndexOf("."))) ?? `valid exports are ${values.join(", ")}, or anything with a '_' prefix`;
      throw new Error(`Invalid export '${key}'${file ? ` in ${file}` : ""} (${hint})`);
    }
  }
  return validate;
}
function hint_for_supported_files(key, ext = ".js") {
  const supported_files = [];
  if (valid_layout_exports.has(key)) {
    supported_files.push(`+layout${ext}`);
  }
  if (valid_page_exports.has(key)) {
    supported_files.push(`+page${ext}`);
  }
  if (valid_layout_server_exports.has(key)) {
    supported_files.push(`+layout.server${ext}`);
  }
  if (valid_page_server_exports.has(key)) {
    supported_files.push(`+page.server${ext}`);
  }
  if (valid_server_exports.has(key)) {
    supported_files.push(`+server${ext}`);
  }
  if (supported_files.length > 0) {
    return `'${key}' is a valid export in ${supported_files.slice(0, -1).join(", ")}${supported_files.length > 1 ? " or " : ""}${supported_files.at(-1)}`;
  }
}
const valid_layout_exports = /* @__PURE__ */ new Set([
  "load",
  "prerender",
  "csr",
  "ssr",
  "trailingSlash",
  "config"
]);
const valid_page_exports = /* @__PURE__ */ new Set([...valid_layout_exports, "entries"]);
const valid_layout_server_exports = /* @__PURE__ */ new Set([...valid_layout_exports]);
const valid_page_server_exports = /* @__PURE__ */ new Set([...valid_layout_server_exports, "actions", "entries"]);
const valid_server_exports = /* @__PURE__ */ new Set([
  "GET",
  "POST",
  "PATCH",
  "PUT",
  "DELETE",
  "OPTIONS",
  "HEAD",
  "fallback",
  "prerender",
  "trailingSlash",
  "config",
  "entries"
]);
const validate_layout_exports = validator(valid_layout_exports);
const validate_page_exports = validator(valid_page_exports);
const validate_layout_server_exports = validator(valid_layout_server_exports);
const validate_page_server_exports = validator(valid_page_server_exports);
const validate_server_exports = validator(valid_server_exports);
export {
  add_data_suffix as a,
  decode_pathname as b,
  decode_params as c,
  disable_search as d,
  validate_layout_exports as e,
  validate_page_server_exports as f,
  validate_page_exports as g,
  has_data_suffix as h,
  validate_server_exports as i,
  make_trackable as m,
  normalize_path as n,
  resolve as r,
  strip_data_suffix as s,
  validate_layout_server_exports as v
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXhwb3J0cy5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BzdmVsdGVqcy9raXQvc3JjL3V0aWxzL3VybC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9Ac3ZlbHRlanMva2l0L3NyYy91dGlscy9leHBvcnRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJST1dTRVIsIERFViB9IGZyb20gJ2VzbS1lbnYnO1xuXG4vKipcbiAqIE1hdGNoZXMgYSBVUkkgc2NoZW1lLiBTZWUgaHR0cHM6Ly93d3cucmZjLWVkaXRvci5vcmcvcmZjL3JmYzM5ODYjc2VjdGlvbi0zLjFcbiAqIEB0eXBlIHtSZWdFeHB9XG4gKi9cbmV4cG9ydCBjb25zdCBTQ0hFTUUgPSAvXlthLXpdW2EtelxcZCtcXC0uXSs6L2k7XG5cbmNvbnN0IGludGVybmFsID0gbmV3IFVSTCgnc3ZlbHRla2l0LWludGVybmFsOi8vJyk7XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGJhc2VcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlKGJhc2UsIHBhdGgpIHtcblx0Ly8gc3BlY2lhbCBjYXNlXG5cdGlmIChwYXRoWzBdID09PSAnLycgJiYgcGF0aFsxXSA9PT0gJy8nKSByZXR1cm4gcGF0aDtcblxuXHRsZXQgdXJsID0gbmV3IFVSTChiYXNlLCBpbnRlcm5hbCk7XG5cdHVybCA9IG5ldyBVUkwocGF0aCwgdXJsKTtcblxuXHRyZXR1cm4gdXJsLnByb3RvY29sID09PSBpbnRlcm5hbC5wcm90b2NvbCA/IHVybC5wYXRobmFtZSArIHVybC5zZWFyY2ggKyB1cmwuaGFzaCA6IHVybC5ocmVmO1xufVxuXG4vKiogQHBhcmFtIHtzdHJpbmd9IHBhdGggKi9cbmV4cG9ydCBmdW5jdGlvbiBpc19yb290X3JlbGF0aXZlKHBhdGgpIHtcblx0cmV0dXJuIHBhdGhbMF0gPT09ICcvJyAmJiBwYXRoWzFdICE9PSAnLyc7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGhcbiAqIEBwYXJhbSB7aW1wb3J0KCd0eXBlcycpLlRyYWlsaW5nU2xhc2h9IHRyYWlsaW5nX3NsYXNoXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVfcGF0aChwYXRoLCB0cmFpbGluZ19zbGFzaCkge1xuXHRpZiAocGF0aCA9PT0gJy8nIHx8IHRyYWlsaW5nX3NsYXNoID09PSAnaWdub3JlJykgcmV0dXJuIHBhdGg7XG5cblx0aWYgKHRyYWlsaW5nX3NsYXNoID09PSAnbmV2ZXInKSB7XG5cdFx0cmV0dXJuIHBhdGguZW5kc1dpdGgoJy8nKSA/IHBhdGguc2xpY2UoMCwgLTEpIDogcGF0aDtcblx0fSBlbHNlIGlmICh0cmFpbGluZ19zbGFzaCA9PT0gJ2Fsd2F5cycgJiYgIXBhdGguZW5kc1dpdGgoJy8nKSkge1xuXHRcdHJldHVybiBwYXRoICsgJy8nO1xuXHR9XG5cblx0cmV0dXJuIHBhdGg7XG59XG5cbi8qKlxuICogRGVjb2RlIHBhdGhuYW1lIGV4Y2x1ZGluZyAlMjUgdG8gcHJldmVudCBmdXJ0aGVyIGRvdWJsZSBkZWNvZGluZyBvZiBwYXJhbXNcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRobmFtZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVjb2RlX3BhdGhuYW1lKHBhdGhuYW1lKSB7XG5cdHJldHVybiBwYXRobmFtZS5zcGxpdCgnJTI1JykubWFwKGRlY29kZVVSSSkuam9pbignJTI1Jyk7XG59XG5cbi8qKiBAcGFyYW0ge1JlY29yZDxzdHJpbmcsIHN0cmluZz59IHBhcmFtcyAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlY29kZV9wYXJhbXMocGFyYW1zKSB7XG5cdGZvciAoY29uc3Qga2V5IGluIHBhcmFtcykge1xuXHRcdC8vIGlucHV0IGhhcyBhbHJlYWR5IGJlZW4gZGVjb2RlZCBieSBkZWNvZGVVUklcblx0XHQvLyBub3cgaGFuZGxlIHRoZSByZXN0XG5cdFx0cGFyYW1zW2tleV0gPSBkZWNvZGVVUklDb21wb25lbnQocGFyYW1zW2tleV0pO1xuXHR9XG5cblx0cmV0dXJuIHBhcmFtcztcbn1cblxuLyoqXG4gKiBUaGUgZXJyb3Igd2hlbiBhIFVSTCBpcyBtYWxmb3JtZWQgaXMgbm90IHZlcnkgaGVscGZ1bCwgc28gd2UgYXVnbWVudCBpdCB3aXRoIHRoZSBVUklcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlY29kZV91cmkodXJpKSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIGRlY29kZVVSSSh1cmkpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKGUgaW5zdGFuY2VvZiBFcnJvcikge1xuXHRcdFx0ZS5tZXNzYWdlID0gYEZhaWxlZCB0byBkZWNvZGUgVVJJOiAke3VyaX1cXG5gICsgZS5tZXNzYWdlO1xuXHRcdH1cblx0XHR0aHJvdyBlO1xuXHR9XG59XG5cbi8qKlxuICogUmV0dXJucyBldmVyeXRoaW5nIHVwIHRvIHRoZSBmaXJzdCBgI2AgaW4gYSBVUkxcbiAqIEBwYXJhbSB7e2hyZWY6IHN0cmluZ319IHVybF9saWtlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdHJpcF9oYXNoKHsgaHJlZiB9KSB7XG5cdHJldHVybiBocmVmLnNwbGl0KCcjJylbMF07XG59XG5cbi8qKlxuICogVVJMIHByb3BlcnRpZXMgdGhhdCBjb3VsZCBjaGFuZ2UgZHVyaW5nIHRoZSBsaWZldGltZSBvZiB0aGUgcGFnZSxcbiAqIHdoaWNoIGV4Y2x1ZGVzIHRoaW5ncyBsaWtlIGBvcmlnaW5gXG4gKi9cbmNvbnN0IHRyYWNrZWRfdXJsX3Byb3BlcnRpZXMgPSAvKiogQHR5cGUge2NvbnN0fSAqLyAoW1xuXHQnaHJlZicsXG5cdCdwYXRobmFtZScsXG5cdCdzZWFyY2gnLFxuXHQndG9TdHJpbmcnLFxuXHQndG9KU09OJ1xuXSk7XG5cbi8qKlxuICogQHBhcmFtIHtVUkx9IHVybFxuICogQHBhcmFtIHsoKSA9PiB2b2lkfSBjYWxsYmFja1xuICogQHBhcmFtIHsoc2VhcmNoX3BhcmFtOiBzdHJpbmcpID0+IHZvaWR9IHNlYXJjaF9wYXJhbXNfY2FsbGJhY2tcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1ha2VfdHJhY2thYmxlKHVybCwgY2FsbGJhY2ssIHNlYXJjaF9wYXJhbXNfY2FsbGJhY2spIHtcblx0Y29uc3QgdHJhY2tlZCA9IG5ldyBVUkwodXJsKTtcblxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkodHJhY2tlZCwgJ3NlYXJjaFBhcmFtcycsIHtcblx0XHR2YWx1ZTogbmV3IFByb3h5KHRyYWNrZWQuc2VhcmNoUGFyYW1zLCB7XG5cdFx0XHRnZXQob2JqLCBrZXkpIHtcblx0XHRcdFx0aWYgKGtleSA9PT0gJ2dldCcgfHwga2V5ID09PSAnZ2V0QWxsJyB8fCBrZXkgPT09ICdoYXMnKSB7XG5cdFx0XHRcdFx0cmV0dXJuICgvKipAdHlwZSB7c3RyaW5nfSovIHBhcmFtKSA9PiB7XG5cdFx0XHRcdFx0XHRzZWFyY2hfcGFyYW1zX2NhbGxiYWNrKHBhcmFtKTtcblx0XHRcdFx0XHRcdHJldHVybiBvYmpba2V5XShwYXJhbSk7XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIGlmIHRoZXkgdHJ5IHRvIGFjY2VzcyBzb21ldGhpbmcgZGlmZmVyZW50IGZyb20gd2hhdCBpcyBpbiBgdHJhY2tlZF9zZWFyY2hfcGFyYW1zX3Byb3BlcnRpZXNgXG5cdFx0XHRcdC8vIHdlIHRyYWNrIHRoZSB3aG9sZSB1cmwgKGVudHJpZXMsIHZhbHVlcywga2V5cyBldGMpXG5cdFx0XHRcdGNhbGxiYWNrKCk7XG5cblx0XHRcdFx0Y29uc3QgdmFsdWUgPSBSZWZsZWN0LmdldChvYmosIGtleSk7XG5cdFx0XHRcdHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicgPyB2YWx1ZS5iaW5kKG9iaikgOiB2YWx1ZTtcblx0XHRcdH1cblx0XHR9KSxcblx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHR9KTtcblxuXHRmb3IgKGNvbnN0IHByb3BlcnR5IG9mIHRyYWNrZWRfdXJsX3Byb3BlcnRpZXMpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkodHJhY2tlZCwgcHJvcGVydHksIHtcblx0XHRcdGdldCgpIHtcblx0XHRcdFx0Y2FsbGJhY2soKTtcblx0XHRcdFx0cmV0dXJuIHVybFtwcm9wZXJ0eV07XG5cdFx0XHR9LFxuXG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0Y29uZmlndXJhYmxlOiB0cnVlXG5cdFx0fSk7XG5cdH1cblxuXHRpZiAoIUJST1dTRVIpIHtcblx0XHQvLyBAdHMtaWdub3JlXG5cdFx0dHJhY2tlZFtTeW1ib2wuZm9yKCdub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbScpXSA9IChkZXB0aCwgb3B0cywgaW5zcGVjdCkgPT4ge1xuXHRcdFx0cmV0dXJuIGluc3BlY3QodXJsLCBvcHRzKTtcblx0XHR9O1xuXHR9XG5cblx0aWYgKERFViB8fCAhQlJPV1NFUikge1xuXHRcdGRpc2FibGVfaGFzaCh0cmFja2VkKTtcblx0fVxuXG5cdHJldHVybiB0cmFja2VkO1xufVxuXG4vKipcbiAqIERpc2FsbG93IGFjY2VzcyB0byBgdXJsLmhhc2hgIG9uIHRoZSBzZXJ2ZXIgYW5kIGluIGBsb2FkYFxuICogQHBhcmFtIHtVUkx9IHVybFxuICovXG5mdW5jdGlvbiBkaXNhYmxlX2hhc2godXJsKSB7XG5cdGFsbG93X25vZGVqc19jb25zb2xlX2xvZyh1cmwpO1xuXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh1cmwsICdoYXNoJywge1xuXHRcdGdldCgpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcblx0XHRcdFx0J0Nhbm5vdCBhY2Nlc3MgZXZlbnQudXJsLmhhc2guIENvbnNpZGVyIHVzaW5nIGAkcGFnZS51cmwuaGFzaGAgaW5zaWRlIGEgY29tcG9uZW50IGluc3RlYWQnXG5cdFx0XHQpO1xuXHRcdH1cblx0fSk7XG59XG5cbi8qKlxuICogRGlzYWxsb3cgYWNjZXNzIHRvIGB1cmwuc2VhcmNoYCBhbmQgYHVybC5zZWFyY2hQYXJhbXNgIGR1cmluZyBwcmVyZW5kZXJpbmdcbiAqIEBwYXJhbSB7VVJMfSB1cmxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpc2FibGVfc2VhcmNoKHVybCkge1xuXHRhbGxvd19ub2RlanNfY29uc29sZV9sb2codXJsKTtcblxuXHRmb3IgKGNvbnN0IHByb3BlcnR5IG9mIFsnc2VhcmNoJywgJ3NlYXJjaFBhcmFtcyddKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KHVybCwgcHJvcGVydHksIHtcblx0XHRcdGdldCgpIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgYWNjZXNzIHVybC4ke3Byb3BlcnR5fSBvbiBhIHBhZ2Ugd2l0aCBwcmVyZW5kZXJpbmcgZW5hYmxlZGApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG59XG5cbi8qKlxuICogQWxsb3cgVVJMIHRvIGJlIGNvbnNvbGUgbG9nZ2VkLCBieXBhc3NpbmcgZGlzYWJsZWQgcHJvcGVydGllcy5cbiAqIEBwYXJhbSB7VVJMfSB1cmxcbiAqL1xuZnVuY3Rpb24gYWxsb3dfbm9kZWpzX2NvbnNvbGVfbG9nKHVybCkge1xuXHRpZiAoIUJST1dTRVIpIHtcblx0XHQvLyBAdHMtaWdub3JlXG5cdFx0dXJsW1N5bWJvbC5mb3IoJ25vZGVqcy51dGlsLmluc3BlY3QuY3VzdG9tJyldID0gKGRlcHRoLCBvcHRzLCBpbnNwZWN0KSA9PiB7XG5cdFx0XHRyZXR1cm4gaW5zcGVjdChuZXcgVVJMKHVybCksIG9wdHMpO1xuXHRcdH07XG5cdH1cbn1cblxuY29uc3QgREFUQV9TVUZGSVggPSAnL19fZGF0YS5qc29uJztcbmNvbnN0IEhUTUxfREFUQV9TVUZGSVggPSAnLmh0bWxfX2RhdGEuanNvbic7XG5cbi8qKiBAcGFyYW0ge3N0cmluZ30gcGF0aG5hbWUgKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNfZGF0YV9zdWZmaXgocGF0aG5hbWUpIHtcblx0cmV0dXJuIHBhdGhuYW1lLmVuZHNXaXRoKERBVEFfU1VGRklYKSB8fCBwYXRobmFtZS5lbmRzV2l0aChIVE1MX0RBVEFfU1VGRklYKTtcbn1cblxuLyoqIEBwYXJhbSB7c3RyaW5nfSBwYXRobmFtZSAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZF9kYXRhX3N1ZmZpeChwYXRobmFtZSkge1xuXHRpZiAocGF0aG5hbWUuZW5kc1dpdGgoJy5odG1sJykpIHJldHVybiBwYXRobmFtZS5yZXBsYWNlKC9cXC5odG1sJC8sIEhUTUxfREFUQV9TVUZGSVgpO1xuXHRyZXR1cm4gcGF0aG5hbWUucmVwbGFjZSgvXFwvJC8sICcnKSArIERBVEFfU1VGRklYO1xufVxuXG4vKiogQHBhcmFtIHtzdHJpbmd9IHBhdGhuYW1lICovXG5leHBvcnQgZnVuY3Rpb24gc3RyaXBfZGF0YV9zdWZmaXgocGF0aG5hbWUpIHtcblx0aWYgKHBhdGhuYW1lLmVuZHNXaXRoKEhUTUxfREFUQV9TVUZGSVgpKSB7XG5cdFx0cmV0dXJuIHBhdGhuYW1lLnNsaWNlKDAsIC1IVE1MX0RBVEFfU1VGRklYLmxlbmd0aCkgKyAnLmh0bWwnO1xuXHR9XG5cblx0cmV0dXJuIHBhdGhuYW1lLnNsaWNlKDAsIC1EQVRBX1NVRkZJWC5sZW5ndGgpO1xufVxuIiwiLyoqXG4gKiBAcGFyYW0ge1NldDxzdHJpbmc+fSBleHBlY3RlZFxuICovXG5mdW5jdGlvbiB2YWxpZGF0b3IoZXhwZWN0ZWQpIHtcblx0LyoqXG5cdCAqIEBwYXJhbSB7YW55fSBtb2R1bGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IFtmaWxlXVxuXHQgKi9cblx0ZnVuY3Rpb24gdmFsaWRhdGUobW9kdWxlLCBmaWxlKSB7XG5cdFx0aWYgKCFtb2R1bGUpIHJldHVybjtcblxuXHRcdGZvciAoY29uc3Qga2V5IGluIG1vZHVsZSkge1xuXHRcdFx0aWYgKGtleVswXSA9PT0gJ18nIHx8IGV4cGVjdGVkLmhhcyhrZXkpKSBjb250aW51ZTsgLy8ga2V5IGlzIHZhbGlkIGluIHRoaXMgbW9kdWxlXG5cblx0XHRcdGNvbnN0IHZhbHVlcyA9IFsuLi5leHBlY3RlZC52YWx1ZXMoKV07XG5cblx0XHRcdGNvbnN0IGhpbnQgPVxuXHRcdFx0XHRoaW50X2Zvcl9zdXBwb3J0ZWRfZmlsZXMoa2V5LCBmaWxlPy5zbGljZShmaWxlLmxhc3RJbmRleE9mKCcuJykpKSA/P1xuXHRcdFx0XHRgdmFsaWQgZXhwb3J0cyBhcmUgJHt2YWx1ZXMuam9pbignLCAnKX0sIG9yIGFueXRoaW5nIHdpdGggYSAnXycgcHJlZml4YDtcblxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGV4cG9ydCAnJHtrZXl9JyR7ZmlsZSA/IGAgaW4gJHtmaWxlfWAgOiAnJ30gKCR7aGludH0pYCk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHZhbGlkYXRlO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7c3RyaW5nfSBleHRcbiAqIEByZXR1cm5zIHtzdHJpbmcgfCB2b2lkfVxuICovXG5mdW5jdGlvbiBoaW50X2Zvcl9zdXBwb3J0ZWRfZmlsZXMoa2V5LCBleHQgPSAnLmpzJykge1xuXHRjb25zdCBzdXBwb3J0ZWRfZmlsZXMgPSBbXTtcblxuXHRpZiAodmFsaWRfbGF5b3V0X2V4cG9ydHMuaGFzKGtleSkpIHtcblx0XHRzdXBwb3J0ZWRfZmlsZXMucHVzaChgK2xheW91dCR7ZXh0fWApO1xuXHR9XG5cblx0aWYgKHZhbGlkX3BhZ2VfZXhwb3J0cy5oYXMoa2V5KSkge1xuXHRcdHN1cHBvcnRlZF9maWxlcy5wdXNoKGArcGFnZSR7ZXh0fWApO1xuXHR9XG5cblx0aWYgKHZhbGlkX2xheW91dF9zZXJ2ZXJfZXhwb3J0cy5oYXMoa2V5KSkge1xuXHRcdHN1cHBvcnRlZF9maWxlcy5wdXNoKGArbGF5b3V0LnNlcnZlciR7ZXh0fWApO1xuXHR9XG5cblx0aWYgKHZhbGlkX3BhZ2Vfc2VydmVyX2V4cG9ydHMuaGFzKGtleSkpIHtcblx0XHRzdXBwb3J0ZWRfZmlsZXMucHVzaChgK3BhZ2Uuc2VydmVyJHtleHR9YCk7XG5cdH1cblxuXHRpZiAodmFsaWRfc2VydmVyX2V4cG9ydHMuaGFzKGtleSkpIHtcblx0XHRzdXBwb3J0ZWRfZmlsZXMucHVzaChgK3NlcnZlciR7ZXh0fWApO1xuXHR9XG5cblx0aWYgKHN1cHBvcnRlZF9maWxlcy5sZW5ndGggPiAwKSB7XG5cdFx0cmV0dXJuIGAnJHtrZXl9JyBpcyBhIHZhbGlkIGV4cG9ydCBpbiAke3N1cHBvcnRlZF9maWxlcy5zbGljZSgwLCAtMSkuam9pbignLCAnKX0ke1xuXHRcdFx0c3VwcG9ydGVkX2ZpbGVzLmxlbmd0aCA+IDEgPyAnIG9yICcgOiAnJ1xuXHRcdH0ke3N1cHBvcnRlZF9maWxlcy5hdCgtMSl9YDtcblx0fVxufVxuXG5jb25zdCB2YWxpZF9sYXlvdXRfZXhwb3J0cyA9IG5ldyBTZXQoW1xuXHQnbG9hZCcsXG5cdCdwcmVyZW5kZXInLFxuXHQnY3NyJyxcblx0J3NzcicsXG5cdCd0cmFpbGluZ1NsYXNoJyxcblx0J2NvbmZpZydcbl0pO1xuY29uc3QgdmFsaWRfcGFnZV9leHBvcnRzID0gbmV3IFNldChbLi4udmFsaWRfbGF5b3V0X2V4cG9ydHMsICdlbnRyaWVzJ10pO1xuY29uc3QgdmFsaWRfbGF5b3V0X3NlcnZlcl9leHBvcnRzID0gbmV3IFNldChbLi4udmFsaWRfbGF5b3V0X2V4cG9ydHNdKTtcbmNvbnN0IHZhbGlkX3BhZ2Vfc2VydmVyX2V4cG9ydHMgPSBuZXcgU2V0KFsuLi52YWxpZF9sYXlvdXRfc2VydmVyX2V4cG9ydHMsICdhY3Rpb25zJywgJ2VudHJpZXMnXSk7XG5jb25zdCB2YWxpZF9zZXJ2ZXJfZXhwb3J0cyA9IG5ldyBTZXQoW1xuXHQnR0VUJyxcblx0J1BPU1QnLFxuXHQnUEFUQ0gnLFxuXHQnUFVUJyxcblx0J0RFTEVURScsXG5cdCdPUFRJT05TJyxcblx0J0hFQUQnLFxuXHQnZmFsbGJhY2snLFxuXHQncHJlcmVuZGVyJyxcblx0J3RyYWlsaW5nU2xhc2gnLFxuXHQnY29uZmlnJyxcblx0J2VudHJpZXMnXG5dKTtcblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRlX2xheW91dF9leHBvcnRzID0gdmFsaWRhdG9yKHZhbGlkX2xheW91dF9leHBvcnRzKTtcbmV4cG9ydCBjb25zdCB2YWxpZGF0ZV9wYWdlX2V4cG9ydHMgPSB2YWxpZGF0b3IodmFsaWRfcGFnZV9leHBvcnRzKTtcbmV4cG9ydCBjb25zdCB2YWxpZGF0ZV9sYXlvdXRfc2VydmVyX2V4cG9ydHMgPSB2YWxpZGF0b3IodmFsaWRfbGF5b3V0X3NlcnZlcl9leHBvcnRzKTtcbmV4cG9ydCBjb25zdCB2YWxpZGF0ZV9wYWdlX3NlcnZlcl9leHBvcnRzID0gdmFsaWRhdG9yKHZhbGlkX3BhZ2Vfc2VydmVyX2V4cG9ydHMpO1xuZXhwb3J0IGNvbnN0IHZhbGlkYXRlX3NlcnZlcl9leHBvcnRzID0gdmFsaWRhdG9yKHZhbGlkX3NlcnZlcl9leHBvcnRzKTtcbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFRQSxNQUFNLFdBQVcsSUFBSSxJQUFJLHVCQUF1QjtBQU16QyxTQUFTLFFBQVEsTUFBTSxNQUFNO0FBRW5DLE1BQUksS0FBSyxDQUFDLE1BQU0sT0FBTyxLQUFLLENBQUMsTUFBTTtBQUFLLFdBQU87QUFFL0MsTUFBSSxNQUFNLElBQUksSUFBSSxNQUFNLFFBQVE7QUFDaEMsUUFBTSxJQUFJLElBQUksTUFBTSxHQUFHO0FBRXZCLFNBQU8sSUFBSSxhQUFhLFNBQVMsV0FBVyxJQUFJLFdBQVcsSUFBSSxTQUFTLElBQUksT0FBTyxJQUFJO0FBQ3hGO0FBV08sU0FBUyxlQUFlLE1BQU0sZ0JBQWdCO0FBQ3BELE1BQUksU0FBUyxPQUFPLG1CQUFtQjtBQUFVLFdBQU87QUFFeEQsTUFBSSxtQkFBbUIsU0FBUztBQUMvQixXQUFPLEtBQUssU0FBUyxHQUFHLElBQUksS0FBSyxNQUFNLEdBQUcsRUFBRSxJQUFJO0FBQUEsRUFDbEQsV0FBWSxtQkFBbUIsWUFBWSxDQUFDLEtBQUssU0FBUyxHQUFHLEdBQUc7QUFDOUQsV0FBTyxPQUFPO0FBQUEsRUFDZDtBQUVELFNBQU87QUFDUjtBQU1PLFNBQVMsZ0JBQWdCLFVBQVU7QUFDekMsU0FBTyxTQUFT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
